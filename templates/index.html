
{% extends 'base.html' %}
{% block styles %}
{{super()}}
{% endblock %}
{% block navheader %}<header class="masthead"
        style="background-image: url('https://funntaste.com/wp-content/uploads/2017/10/Feature-picture.png')">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <div class="site-heading">
                    <h4>Find your study friendly spots in your location!</h4>
                    <span class="subheading">Share a place where it is worthwhile to stop and learn.</span>
                </div>
            </div>
        </div>
    </div>
</header>



<!-- Main Content -->
<div class="container">
{% endblock %}
{% block content %}
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        <div class="row">
            <div class="col-md-4 col-lg-offset-4 ml-auto mr-auto">
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                <span>{{ message }}</span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">Ã—</span>
                </button>
            </div>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            <div class="post-preview mt-4">
                 <form action="{{url_for('home')}}" method="POST">
                    <div class="row cafe-name">

                           <div class="input-group mb-3">
                              <input name="city-search" type="text" class="form-control" style="height: 120%" placeholder="Type your city name" aria-label="Recipient's username" aria-describedby="button-addon2">
                              <div class="input-group-append">
                                <button class="ml-1 btn btn-outline-secondary btn-dark text-light" type="submit" id="button-addon2">Search</button>
                              </div>
                            </div>
                    </div>
                </form>


            </div>


        </div>
    </div>


    <div class="row mt-4">
        <div class="col-lg-8 col-md-10 mx-auto">

            {% if not city_to_search %}
            {% for cafe in cafes %}
            <div class="post-preview mt-4">

                    <div class="row cafe-name">
                        <div class="col-sm-8">
                            <h2 class="post-title">
                                {{cafe.name}} {{cafe.rating}}&#11088;
                            </h2>
                             {% if current_user.email == "admin@test.pl" %}
                            <a href="{{url_for('delete_cafe', cafe_id=cafe.id)}}">Delete Cafe &#x2716;</a>
                            {% endif %}
                        </div>
                        <div class="col-sm-4">
                            <img class="ml-auto" src="{{cafe.img_url}}" alt="Coffe Image"
                                 style="max-height: 200px;width: 150px;height: 130px;border-radius: 50%;">
                        </div>
                    </div>

                    <h3>City: {{cafe.location}}</h3>
                    <details>
                      <summary>More details</summary>
                        <p>Price: {{cafe.price}}</p>
                        <p>Cafe google maps: <a href="{{cafe.map_url}}">{{cafe.name}}</a></p>
                      <p>Seats: {{cafe.seats}}</p>
                        <p>Toilet for clients: {{cafe.has_toilet}}</p>
                        <p>Wifi for clients: {{cafe.has_wifi}}</p>
                        <p>Sockets for clients: {{cafe.has_sockets}}</p>
                         <p>Telephone coverage: {{cafe.can_take_calls}}</p>
                        <p>Address: {{cafe.address}}</p>
                        <p>Phone: {{cafe.phone}}</p>
                     </details>
                <hr>
            </div>
            {% endfor %}
            {% elif city_to_search %}
             {% for cafe in cafes %}
            {% if cafe.location == city_to_search %}
            <div class="post-preview mt-4">

                    <div class="row cafe-name">
                        <div class="col-sm-8">
                            <h2 class="post-title">
                                {{cafe.name}} {{cafe.rating}}&#11088;

                            </h2>
                             {% if current_user.email == "admin@test.pl" %}
                            <a href="{{url_for('delete_cafe', cafe_id=cafe.id)}}">Delete Cafe &#x2716;</a>
                            {% endif %}
                        </div>
                        <div class="col-sm-4">
                            <img class="ml-auto" src="{{cafe.img_url}}" alt="Coffe Image"
                                 style="max-height: 200px;width: 150px;height: 130px;border-radius: 50%;">
                        </div>
                    </div>
                    <h3>City: {{cafe.location}}</h3>
                        <details>
                          <summary>More details</summary>
                            <p>Price: {{cafe.price}}</p>
                            <p>Cafe google maps: <a href="{{cafe.map_url}}">{{cafe.name}}</a></p>
                          <p>Seats: {{cafe.seats}}</p>
                            <p>Toilet for clients: {{cafe.has_toilet}}</p>
                            <p>Wifi for clients: {{cafe.has_wifi}}</p>
                            <p>Sockets for clients: {{cafe.has_sockets}}</p>
                             <p>Telephone coverage: {{cafe.can_take_calls}}</p>
                            <p>Address: {{cafe.address}}</p>
                            <p>Phone: {{cafe.phone}}</p>
                     </details>
                <hr>


            </div>
            {% endif %}
            {% endfor %}
            {% endif %}


        </div>
    </div>
</div>
<hr>

{% endblock %}